https://www.websequencediagrams.com/

 http://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgVGF0dGxlcgogVXNlci0-UGhwOiBHZXQgV1MsIHNldCBzZXNzaW9uSWQKIG5vdGUgcmlnaHQgb2YAKwU6IGFqYXgAEwdsZWYAFAUAPgVyZW1lbWJlcgA0DABcBldzOiBjb25uZWN0ACoPV3M6IGdldCBzb2NrZXQAKAoAgQ8Fc2VuZCByb29tcyByZXF1ZXN0ICYmACIJAAcFAHQ2dmFsaWRhdGUAVgdhY2Nlc3MKIFBocACBJgZzdG9yZQCBfQoAagwsIG1hawAyBwCBUwxzdWJzY3JpYmUgdG8AFghXcy0-AIItBmpvaW4AZQhsbG93ZWQgYnkgUGhwAIIWDGRhbmNl&s=default

 title Tattler
 User->Php: Get WS, set sessionId
 note right of User: ajax
 note left of Php: remember sessionId
 User->Ws: connect
 note left of Ws: get socketId
 User->Php: send rooms request && socketId && sessionId
 note right of User: ajax
 note left of Php: validate rooms access
 Php->Ws: store sessionId && socketId, make rooms
 User->Ws: subscribe to rooms
 Ws->User: join rooms allowed by Php
 User->Ws: dance
